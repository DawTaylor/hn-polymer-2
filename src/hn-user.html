<!--
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->
<link rel="import" href="hn-stamp-mixin.html">
<dom-module id="hn-user">
  <template strip-whitespace>
    <style>
      :host {
        display: block;
        font-size: var(--detail-font-size);
      }

      a {
        color: currentColor;
      }

      .links {
        padding: 8px 0;
      }

      .about {
        overflow-wrap: break-word;
      }

      .about pre {
        white-space: pre-line;
      }
    </style>
    <table>
      <tr>
        <td>User:</td>
        <td id="id"></td>
      </tr>
      <tr>
        <td>Created:</td>
        <td id="created"></td>
      </tr>
      <tr>
        <td>Karma:</td>
        <td id="karma"></td>
      </tr>
    </table>
    <div id="about" class="about"></div>
    <div class="links">
      <a id="submissions">submissions</a>
      |
      <a id="threads">comments</a>
      |
      <a id="favorites">favorites</a>
    </div>
  </template>

  <script>
  (function() {
    let ELEMENT_NAME = 'hn-user';
    let template = document.currentScript.ownerDocument
      .querySelector(`dom-module[id=${ELEMENT_NAME}] > template`);

    class HnUser extends Hn.stampMixin(HTMLElement) {

      get _template() { return template; }

      _render() {
        if (!this.user) {
          return;
        }
        this.$.id.textContent = this.user.id;
        this.$.created.textContent = this.user.created;
        this.$.karma.textContent = this.user.karma;
        this.$.about.innerHTML = this.user.about ? this.user.about : '';
        this.$.submissions.href = this._hnLink('submitted', this.user.id);
        this.$.threads.href = this._hnLink('threads', this.user.id);
        this.$.favorites.href = this._hnLink('favorites', this.user.id);
      }

      _hnLink(type, id) {
        return `https://news.ycombinator.com/${type}?id=${id}`;
      }
    }

    HnUser.createProperties(['user']);

    window.customElements.define('hn-user', HnUser);
  })();
  </script>
</dom-module>
